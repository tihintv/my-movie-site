<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WebPhim</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, sans-serif; line-height: 1.5;
           background: #0b0d10; color: #e8eef5; }

    .container { max-width: min(1200px, 92vw); margin: 24px auto; }

    header { display: flex; gap: 12px; align-items: center; justify-content: space-between;
             position: sticky; top: 0; padding: 12px 0; border-bottom: 1px solid #1c222b;
             background: #0b0d10; z-index: 10; }

    .brand { display: flex; align-items: center; gap: 10px; }
    .brand .logo { width: 28px; height: 28px; border-radius: 8px;
                   background: #6ea8fe; display: grid; place-items: center;
                   font-weight: 700; color: white; }
    .brand h1 { font-size: 18px; margin: 0; }

    .search input[type="search"] {
      width: 100%; padding: 10px 12px; border-radius: 12px;
      border: 1px solid #1c222b; background: #11151b; color: #e8eef5;
      outline: none;
    }

    .grid { margin-top: 16px; display: grid; gap: 16px;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
    .card { background: #11151b; border: 1px solid #1c222b; border-radius: 14px;
            overflow: hidden; transition: transform .12s ease; }
    .card:hover { transform: translateY(-2px); }
    .poster { aspect-ratio: 2/3; width: 100%; object-fit: cover; background: #111; }
    .content { padding: 10px; }
    .title { font-size: 14px; font-weight: 700; }

    .chips { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 2px; }
    .chip { font-size: 11px; padding: 4px 8px; border-radius: 999px;
            background: #1b2838; color: #b8c2cc; border: 1px solid #1c222b }

    .empty { text-align: center; color: #93a1b0; padding: 40px 10px;
             border: 1px dashed #1c222b; border-radius: 12px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand"><div class="logo">ðŸŽ¬</div><h1>WebPhim</h1></div>
      <div class="search">
        <input id="q" type="search" placeholder="TÃ¬m theo tÃªn, thá»ƒ loáº¡iâ€¦" autocomplete="off" />
      </div>
    </header>

    <main>
      <section id="grid" class="grid"></section>
      <div id="empty" class="empty" hidden>KhÃ´ng cÃ³ phim phÃ¹ há»£p vá»›i tá»« khoÃ¡.</div>
    </main>
  </div>

  <script>
    const STORAGE_KEY = "movies";

    const placeholderPoster = (title = "Poster") =>
      `https://placehold.co/400x600/png?text=${encodeURIComponent(title)}`;

    const SAMPLE_MOVIES = [
      { id: 1, title: "Demon Slayer", year: 2019, genres: ["Action","Anime"], poster: placeholderPoster("Demon Slayer"), description: "Tanjiro chiáº¿n Ä‘áº¥u vá»›i quá»· Ä‘á»ƒ cá»©u em gÃ¡i." },
      { id: 2, title: "Spirited Away", year: 2001, genres: ["Fantasy","Anime"], poster: placeholderPoster("Spirited Away"), description: "CÃ´ bÃ© láº¡c vÃ o tháº¿ giá»›i linh há»“n." },
      { id: 3, title: "Parasite", year: 2019, genres: ["Drama","Thriller"], poster: placeholderPoster("Parasite"), description: "Bá»©c tranh chÃ¢m biáº¿m giÃ u nghÃ¨o Ä‘an xen ká»‹ch tÃ­nh." }
    ];

    function loadMovies() {
      const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
      if (!data || !data.length) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(SAMPLE_MOVIES));
        return SAMPLE_MOVIES;
      }
      return data;
    }

    let movies = loadMovies();

    const gridEl = document.getElementById("grid");
    const emptyEl = document.getElementById("empty");
    const qEl = document.getElementById("q");

    function movieCard({ id, title, year, genres, poster }) {
      const chips = genres.map(g => `<span class="chip">${g}</span>`).join("");
      return `
        <article class="card" tabindex="0">
          <img class="poster" src="${poster || placeholderPoster(title)}" alt="Poster: ${title}" />
          <div class="content">
            <h3 class="title">${title}</h3>
            <div class="chips">${chips}</div>
            <div class="meta">${year}</div>
          </div>
        </article>`;
    }

    function renderMovies(list) {
      if (!list.length) {
        gridEl.innerHTML = "";
        emptyEl.hidden = false;
      } else {
        emptyEl.hidden = true;
        gridEl.innerHTML = list.map(movieCard).join("");
      }
    }

    function normalizeText(s="") {
      return s.toString().normalize("NFD").replace(/[\\u0300-\\u036f]/g, "").toLowerCase().trim();
    }

    function filterMovies(keyword) {
      const kw = normalizeText(keyword);
      if (!kw) return movies;
      return movies.filter(m =>
        normalizeText(m.title).includes(kw) ||
        normalizeText(m.genres.join(" ")).includes(kw) ||
        String(m.year).includes(kw)
      );
    }

    qEl.addEventListener("input", () => {
      renderMovies(filterMovies(qEl.value));
    });

    renderMovies(movies);
  </script>
</body>
</html>
